# A Lightweight In-Memory Vector Database with MVCC

> Developed by Ellie Li, Yuxuan Liu, and Victor Olawale-Apanpa

## Overview

This project is a lightweight, in-memory vector database that integrates **Multi-Version Concurrency Control (MVCC)** with **semantic similarity search**. It supports full transactional semantics while enabling **top-k vector queries** over natural language data using dense transformer embeddings.

Our system allows transactions to operate over versioned records, maintaining snapshot isolation, and performs vector search by filtering semantically similar results according to transaction visibility.

---

## Features

- **Semantic Search**  
  Supports top-k similarity queries using embeddings generated by [`hkunlp/instructor-xl`](https://huggingface.co/hkunlp/instructor-xl).

- **MVCC Snapshot Isolation**  
  Each transaction operates on a consistent snapshot of the database, preserving repeatable reads.

- **Version Management**  
  Insert, update, and delete operations create version chains that preserve transactional consistency.

- **In-Process Testing Framework**  
  Simulates concurrent transactions and validates correctness through scripted CLI interactions.

---

## System Architecture

### MVCC Layer
- Records are versioned and include metadata (timestamps, deletion flags, version IDs).
- Transactions maintain a consistent snapshot of visible records at their start time.
- Operations include:
  - `insert`: adds a new version with an embedding.
  - `update`: creates a new version after validating concurrency.
  - `delete`: adds a tombstone version (not stored in the vector index).
  - `commit` / `abort`: finalizes or discards all versioned changes.

### Vector Search Module
- Stateless module using in-memory data structures.
- Computes cosine similarity for top-k semantic matches.
- Isolates queries using the transactionâ€™s visible version keys (`valid_keys`).
- Modular and testable: does not maintain internal state or transaction awareness.
